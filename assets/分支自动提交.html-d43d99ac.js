import{_ as i,r as e,o as u,c as k,a,w as t,f as n,h as s,d as p}from"./app-ac465cee.js";const r="/vuepress-lingdu-v2/assets/img_10-93250da4.png",d="/vuepress-lingdu-v2/assets/img_12-3eaed456.png",m="/vuepress-lingdu-v2/assets/img_8-16c64913.png",v="/vuepress-lingdu-v2/assets/img_9-b596da64.png",b={},g=p(`<h1 id="分支自动提交" tabindex="-1"><a class="header-anchor" href="#分支自动提交" aria-hidden="true">#</a> 分支自动提交</h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>项目构建就不在这里赘述了</p></div><p>目录结构</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>├─ docs
│  ├─ .vuepress
│  │  └─ config.js
│  └─ README.md
├─ .gitignore
├─ git-commit.js    // 新增脚本文件
└─ package.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-设置项目打包参数" tabindex="-1"><a class="header-anchor" href="#_1-设置项目打包参数" aria-hidden="true">#</a> 1. 设置项目打包参数</h2><p>在项目中config.js/config.ts设置属性：</p>`,6),f=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"//docs/.vuepress/config.js"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 描述"),s(`
    `),n("span",{class:"token literal-property property"},"description"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'vuepress-lingdu-v2'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 项目打包目的地"),s(`
    `),n("span",{class:"token literal-property property"},"dest"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./dist'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 项目访问路径前缀"),s(`
    `),n("span",{class:"token literal-property property"},"base"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/vuepress-lingdu-v2/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 。。。"),s(`
    
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"//docs/.vuepress/config.ts"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 描述"),s(`
    description`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'vuepress-lingdu-v2'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 项目打包目的地"),s(`
    dest`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./dist'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 项目访问路径前缀"),s(`
    base`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/vuepress-lingdu-v2/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// 。。。"),s(`
    
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("h2",{id:"_2-添加自动提交脚本",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-添加自动提交脚本","aria-hidden":"true"},"#"),s(" 2. 添加自动提交脚本")],-1),y=n("p",null,"在package.json同级目录下创建git-commit.js",-1),w={class:"hint-container details"},j=n("summary",null,"git-commit.js代码",-1),x=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// git-commit.js"),s(`
`),n("span",{class:"token comment"},"// 更新代码到远程仓库"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s("spawn"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"child_process"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 提交代码描述说明"),s(`
`),n("span",{class:"token keyword"},"const"),s(" commitMessage "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'更新'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 远程仓库名称"),s(`
`),n("span",{class:"token keyword"},"const"),s(" repoName "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'origin'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 远程仓库地址"),s(`
`),n("span",{class:"token keyword"},"const"),s(" repo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'https://github.com/lingdu990130556/vuepress-lingdu-v2.git'"),s(`
`),n("span",{class:"token comment"},"// 分支名称 放在GitHub上的话可以与主分支区别开就能开启静态页面功能了"),s(`
`),n("span",{class:"token keyword"},"const"),s(" branch "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'main'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 启动方法"),s(`
`),n("span",{class:"token keyword"},"const"),s(" c"),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"cmd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token doc-comment comment"},`/**
 * 执行cmd命令
 */`),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"cmd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"opts"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    opts `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"stdio"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"inherit"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},"}"),s(`
    opts`),n("span",{class:"token punctuation"},"."),s("shell "),n("span",{class:"token operator"},"="),s(" opts"),n("span",{class:"token punctuation"},"."),s("shell "),n("span",{class:"token operator"},"||"),s(" process"),n("span",{class:"token punctuation"},"."),s("platform "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'win32'"),s(`

    `),n("span",{class:"token keyword"},"const"),s(" path "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'path'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 更改当前工作目录到 dist"),s(`
    process`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"chdir"),n("span",{class:"token punctuation"},"("),s("path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 注意要cd到要提交的代码文件夹下或者把此脚本放在要提交的代码的文件夹下！！！！！！！！！！！！！！！！！！！！！！！！！！"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在初始化 Git 仓库。。。"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" s"),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'init'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 初始化"),s(`
    s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在将文件添加到暂存区。。。"'),n("span",{class:"token punctuation"},")"),s(`
        s`),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'add . '"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 添加文件"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在提交代码并添加提交信息。。。"'),n("span",{class:"token punctuation"},")"),s(`
            s`),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'commit'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'-m'"),n("span",{class:"token punctuation"},","),s("commitMessage"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 提交到本地"),s(`
            s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在创建一个新分支："'),n("span",{class:"token operator"},"+"),s("branch"),n("span",{class:"token punctuation"},")"),s(`
                s`),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'branch'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'-M'"),n("span",{class:"token punctuation"},","),s("branch"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 创建分支"),s(`
                s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在添加远程仓库地址："'),n("span",{class:"token operator"},"+"),s("repo"),n("span",{class:"token punctuation"},")"),s(`
                    s`),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'remote'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'add'"),n("span",{class:"token punctuation"},","),s(" repoName"),n("span",{class:"token punctuation"},","),s(" repo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 添加远程仓库"),s(`
                    s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在推送代码到远程仓库。。。。"'),n("span",{class:"token punctuation"},")"),s(`
                        `),n("span",{class:"token keyword"},"let"),s(" p"),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"myspawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'push'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'-f'"),n("span",{class:"token punctuation"},","),s(" repoName"),n("span",{class:"token punctuation"},","),s(" branch"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"// 提交到远程仓库"),s(`
                        p`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"r"),n("span",{class:"token operator"},"=>"),n("span",{class:"token punctuation"},"{"),s(`
                            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"执行结束"'),n("span",{class:"token punctuation"},")"),s(`
                        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
                    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'〇°'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token doc-comment comment"},[s(`/**
 * 以 Promise 方式运行 spawn
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"cmd"),s(` 主程序
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"args"),s(` 程序参数数组
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"opts"),s(` spawn 选项
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"myspawn"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("cmd"),n("span",{class:"token punctuation"},","),s(" args"),n("span",{class:"token punctuation"},","),s(" opts")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Promise"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("resolve"),n("span",{class:"token punctuation"},","),s(" reject")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"const"),s(" child "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),s("cmd"),n("span",{class:"token punctuation"},","),s(" args"),n("span",{class:"token punctuation"},","),s(" opts"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" stdout "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" stderr "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),s(`
        child`),n("span",{class:"token punctuation"},"."),s("stdout "),n("span",{class:"token operator"},"&&"),s(" child"),n("span",{class:"token punctuation"},"."),s("stdout"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'data'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"d"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(" stdout "),n("span",{class:"token operator"},"+="),s(" d"),n("span",{class:"token punctuation"},";"),s(" console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"stdout"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(" stdout"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        child`),n("span",{class:"token punctuation"},"."),s("stderr "),n("span",{class:"token operator"},"&&"),s(" child"),n("span",{class:"token punctuation"},"."),s("stderr"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'data'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"d"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(" stderr "),n("span",{class:"token operator"},"+="),s(" d"),n("span",{class:"token punctuation"},";"),s(" console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"stderr"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(" stderr"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        child`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'error'"),n("span",{class:"token punctuation"},","),s(" reject"),n("span",{class:"token punctuation"},")"),s(`
        child`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"code"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s("code"),n("span",{class:"token punctuation"},","),s(" stdout"),n("span",{class:"token punctuation"},","),s(" stderr"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),G=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 更新代码到远程仓库"),s(`
`),n("span",{class:"token comment"},"// 注意此脚本会将dist复制覆盖到distmain文件夹，主分支的.gitignore文件中应该要排除distmain文件夹"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s("spawn"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"child_process"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" fs "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs-extra'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 提交代码描述说明"),s(`
`),n("span",{class:"token keyword"},"const"),s(" commitMessage "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'更新'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 远程仓库名称"),s(`
`),n("span",{class:"token keyword"},"const"),s(" repoName "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'origin'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 远程仓库地址"),s(`
`),n("span",{class:"token keyword"},"const"),s(" repo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'https://github.com/lingdu990130556/vuepress-lingdu-v2.git'"),s(`
`),n("span",{class:"token comment"},"// 分支名称 放在GitHub上的话可以与主分支区别开就能开启静态页面功能了"),s(`
`),n("span",{class:"token keyword"},"const"),s(" branch "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'main'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 启动方法"),s(`
`),n("span",{class:"token keyword"},"const"),s(" c"),n("span",{class:"token operator"},"="),n("span",{class:"token function"},"cmd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token doc-comment comment"},`/**
 * 执行cmd命令
 */`),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"cmd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"opts"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    opts `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"stdio"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"inherit"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},"}"),s(`
    opts`),n("span",{class:"token punctuation"},"."),s("shell "),n("span",{class:"token operator"},"="),s(" opts"),n("span",{class:"token punctuation"},"."),s("shell "),n("span",{class:"token operator"},"||"),s(" process"),n("span",{class:"token punctuation"},"."),s("platform "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'win32'"),s(`


    `),n("span",{class:"token keyword"},"const"),s(" path "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'path'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在复制替换 dist 文件夹到 distmain 文件夹..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    fs`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"copySync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./dist'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'./distmain'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"overwrite"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在切换到 distmain 文件夹..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    process`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"chdir"),n("span",{class:"token punctuation"},"("),s("path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'distmain'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 检查是否已初始化Git仓库"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" isGitInitialized "),n("span",{class:"token operator"},"="),s(" fs"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"existsSync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./.git'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("isGitInitialized"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在初始化 Git 仓库..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" s "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'init'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Git 仓库初始化完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"addAndCommit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token function"},"addAndCommit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"addAndCommit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在将文件添加到暂存区..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" s "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'add . '"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"文件添加到暂存区完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"commitChanges"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"commitChanges"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在提交代码并添加提交信息..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" s "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'commit'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'-m'"),n("span",{class:"token punctuation"},","),s(" commitMessage"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"代码提交完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"createBranch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createBranch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在创建一个新分支："'),s(),n("span",{class:"token operator"},"+"),s(" branch"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" s "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'branch'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'-M'"),n("span",{class:"token punctuation"},","),s(" branch"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"分支创建完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"addRemoteRepository"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"addRemoteRepository"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在添加远程仓库地址："'),s(),n("span",{class:"token operator"},"+"),s(" repo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" s "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'remote'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'add'"),n("span",{class:"token punctuation"},","),s(" repoName"),n("span",{class:"token punctuation"},","),s(" repo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s("opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        s`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"code"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"远程仓库地址添加完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"pushChanges"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"pushChanges"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在推送代码到远程仓库..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" p "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"myspawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'git'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'push'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'-f'"),n("span",{class:"token punctuation"},","),s(" repoName"),n("span",{class:"token punctuation"},","),s(" branch"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" opts"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("stdout"),n("span",{class:"token punctuation"},","),s(" stderr")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"正在推送代码到远程仓库..."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"stdout:"'),n("span",{class:"token punctuation"},","),s(" stdout"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"stderr:"'),n("span",{class:"token punctuation"},","),s(" stderr"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        p`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"r"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"代码推送完成"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"执行结束"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'〇°'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token doc-comment comment"},[s(`/**
 * 以 Promise 方式运行 spawn
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"cmd"),s(` 主程序
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"args"),s(` 程序参数数组
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"opts"),s(` spawn 选项
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"progressCallback"),s(` 进度回调函数
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"myspawn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("cmd"),n("span",{class:"token punctuation"},","),s(" args"),n("span",{class:"token punctuation"},","),s(" opts"),n("span",{class:"token punctuation"},","),s(" progressCallback")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Promise"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("resolve"),n("span",{class:"token punctuation"},","),s(" reject")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"const"),s(" child "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"spawn"),n("span",{class:"token punctuation"},"("),s("cmd"),n("span",{class:"token punctuation"},","),s(" args"),n("span",{class:"token punctuation"},","),s(" opts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" stdout "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" stderr "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`
        child`),n("span",{class:"token punctuation"},"."),s("stdout "),n("span",{class:"token operator"},"&&"),s(" child"),n("span",{class:"token punctuation"},"."),s("stdout"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'data'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"data"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            stdout `),n("span",{class:"token operator"},"+="),s(" data"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"progressCallback"),n("span",{class:"token punctuation"},"("),s("stdout"),n("span",{class:"token punctuation"},","),s(" stderr"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        child`),n("span",{class:"token punctuation"},"."),s("stderr "),n("span",{class:"token operator"},"&&"),s(" child"),n("span",{class:"token punctuation"},"."),s("stderr"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'data'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"data"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            stderr `),n("span",{class:"token operator"},"+="),s(" data"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token function"},"progressCallback"),n("span",{class:"token punctuation"},"("),s("stdout"),n("span",{class:"token punctuation"},","),s(" stderr"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        child`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'error'"),n("span",{class:"token punctuation"},","),s(" reject"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        child`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"code"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" code"),n("span",{class:"token punctuation"},","),s(" stdout"),n("span",{class:"token punctuation"},","),s(" stderr "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),C=p(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>// 提交代码描述说明<br> const commitMessage = &#39;<mark>更新</mark>&#39; ;<br> // 远程仓库名称<br> const repoName = &#39;<mark>origin</mark>&#39; ;<br> // 远程仓库地址<br> const repo = &#39;<mark>https://github.com/lingdu990130556/vuepress-lingdu-v2.git</mark>&#39;<br> // 分支名称 放在GitHub上的话可以与主分支区别开就能开启静态页面功能了<br> const branch = &#39;<mark>main</mark>&#39;;</p><p>仓库结构:</p><div class="language-仓库结构 line-numbers-mode" data-ext="仓库结构"><pre class="language-仓库结构"><code>├─ master   // 默认分支/主分支（存放代码）
│   ├─ dist
│   ├─ docs
│   ├─ .gitignore
│   ├─ git-commit.js
│   └─ package.json
└─ main     // 新建分支（存放打包后的静态页面代码）
    ├─ assets
    ├─ bookmark
    ├─ docs
    ├─ img
    ├─ js
    ├─ plugin
    ├─ 404.html
    └─ index.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面参数中深色部分为你自己的参数项，根据你自己实际情况变更</p></div><h2 id="_3-变更打包命令" tabindex="-1"><a class="header-anchor" href="#_3-变更打包命令" aria-hidden="true">#</a> 3. 变更打包命令</h2><p>在package.json中更改：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;docs:build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更改为：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;docs:build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs &amp;&amp; node git-commit.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>有时候国内访问GitHub会超时导致提交代码失败。<br> 如：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>fatal: unable to access &#39;https://github.com/lingdu990130556/vuepress-lingdu-v2.git/&#39;: Recv failure: Connection was reset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>fatal: unable to access &#39;https://github.com/lingdu990130556/vuepress-lingdu-v2.git/&#39;: Failed to connect to github.com port 443 after 21108 ms: Couldn&#39;t connect to server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这时候可以在控制台单独执行<code>node git-commit.js</code>命令提交代码： <img src="`+r+'" alt="" loading="lazy"></p><p>或者直接在<code>git-commit.js</code>中右击，然后点击<code>运行</code><img src="'+d+'" alt="" loading="lazy"></p></div><br>',8),q={class:"hint-container danger"},N=n("p",{class:"hint-container-title"},"如果实在是嫌网络不给力可以提交到Gitee, 然后开通仓库镜像管理功能",-1),H=n("p",null,"仓库镜像管理功能用于配置和管理仓库镜像；配置仓库镜像可以实现不同平台之间仓库分支、标签和提交信息的自动同步。",-1),M=n("p",null,"配置仓库镜像可以帮助你管理 GitHub 的仓库，减少维护不同平台仓库的时间成本。",-1),z={href:"https://help.gitee.com/repository/settings/sync-between-gitee-github",target:"_blank",rel:"noopener noreferrer"},I=n("mark",null,"仓库镜像管理（Gitee<->Github 双向同步",-1),R=n("h2",{id:"_4-github开启pages",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4-github开启pages","aria-hidden":"true"},"#"),s(" 4. GitHub开启Pages")],-1),B=n("p",null,[n("img",{src:m,alt:"",loading:"lazy"}),s(" main分支中文件就是项目打包后dist中的文件 "),n("img",{src:v,alt:"",loading:"lazy"})],-1),E=n("p",null,[s("至此，你的vuepress项目就能在GitHub上访问了。且"),n("mark",null,"每次本地打包的时候就会自动提交到GitHub分支上")],-1);function P(A,V){const o=e("CodeGroupItem"),c=e("CodeGroup"),l=e("ExternalLinkIcon");return u(),k("div",null,[g,a(c,null,{default:t(()=>[a(o,{title:"config.js",active:""},{default:t(()=>[f]),_:1}),a(o,{title:"config.ts"},{default:t(()=>[h]),_:1})]),_:1}),_,y,n("details",w,[j,a(c,null,{default:t(()=>[a(o,{title:"git-commit.js旧版【每次重新初始化git】"},{default:t(()=>[x]),_:1}),a(o,{title:"git-commit.js新版【只初始化一次git】",active:""},{default:t(()=>[G]),_:1})]),_:1})]),C,n("div",q,[N,H,M,n("p",null,[n("a",z,[s("相关文档("),I,s("）)"),a(l)])])]),R,B,E])}const L=i(b,[["render",P],["__file","分支自动提交.html.vue"]]);export{L as default};
